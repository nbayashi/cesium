#-csv------------------------
library(dplyr)
library(foreign)
setwd("~/Documents/GitHub/cesium/covid/Source/pdf")
setwd("~/Documents/GitHub/cesium/covid/Source/country")
cont <- read.dbf("../shp/country.dbf")
cont <- read.dbf("shp/country.dbf")
cont <- select(.data = cont, country,xcoord, ycoord)
files <- list.files(pattern=".csv")
fact ="confirmed"
length(files)
for (i in 1 : length(files)){
dat <- read.csv(files[i])
names(dat) <- sub("contry","country",names(dat))
dat <- select(.data = dat, country, fact)
names(dat) <- c("country",substr(files[i],1,8))
cont <- merge(cont,dat,by.x="country",by.y="country",all=T)
cont <- cont[0:300,]
}
cont
cont[240:300,]
cont[240:300,1]
names(cont)
write.csv(cont,"country_confirmed.csv")
cont <- read.dbf("shp/country.dbf")
cont <- select(.data = cont, country,xcoord, ycoord)
files <- list.files(pattern=".csv")
fact ="confirmed"
for (i in 1 : length(files)){
dat <- read.csv(files[i])
names(dat) <- sub("contry","country",names(dat))
dat <- select(.data = dat, country, fact)
names(dat) <- c("country",substr(files[i],1,8))
cont <- merge(cont,dat,by.x="country",by.y="country",all=T)
cont <- cont[0:300,]
}
cont
rlang::last_error()
#-csv------------------------
library(dplyr)
library(foreign)
cont[240:300,1]
names(cont)
dat
dat <- read.csv(files[i])
names(dat) <- sub("contry","country",names(dat))
dat
cont <- read.dbf("shp/country.dbf")
cont <- select(.data = cont, country,xcoord, ycoord)
files <- list.files(pattern=".csv")
fact ="confirmed"
for (i in 1 : length(files)){
dat <- read.csv(files[i])
names(dat) <- sub("contry","country",names(dat))
dat <- select(.data = dat, country, fact)
names(dat) <- c("country",substr(files[i],1,8))
cont <- merge(cont,dat,by.x="country",by.y="country",all=T)
cont <- cont[0:300,]
}
write.csv(cont,"country_confirmed.csv")
